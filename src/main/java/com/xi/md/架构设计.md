日常单个商品交易业务：CDC + 最终一致性
客户端 -> 网关 -> 业务服务 -> MySQL库存扣减 -> MySQL Binlog -> CDC服务 -> kafka -> 库存消费者 -> Redis缓存

日常购物车交易：分布式事务锁 + 版本号控制
客户端 -> 网关 -> 购物车订单服务(订单ID为KEY) -> 分布式锁 -> 库存服务（批量检查版本号） -> MySQL乐观锁更新 -> MySQL Binlog -> CDC -> 锁释放

秒杀高峰单个商品交易：预扣减 + 异步落库模式
客户端 -> 网关 -> 秒杀服务 -> Redis原子扣减 -> MQ -> 订单服务 -> MySQL -> Binlog -> CDC -> 状态通知 -> 回写Redis订单状态
客户端 -> 网关 -> redis记录订单

秒杀购物车交易：分片库存预扣减 + 异步聚合
客户端 -> 网关（按Redis节点分组商品） -> 购物车订单服务（订单ID为KEY） -> 并发调用各分片Lua脚本扣减（成功：记录预扣减状态 失败：触发回滚已扣减商品） -> MQ（订单创建队列） -> 消费者创建正式订单 -> 定时任务（核对预扣减与正式订单状态一致）